const telegram_template = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="#0188CB"/><path d="M24 32.5L19 36.5L20 29.5L24 32.5Z" fill="#4CAADA"/><path d="M35.5 14L9 25L16 28.5L20 29.5L31 38L35.5 14Z" fill="white"/><path d="M31.5 17.5L16 28.5L19 36.5L20 29.5L31.5 17.5Z" fill="#98CEEA"/></svg>';
const whatsapp_template = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="#4EC247"/><path d="M21.2559 17.2265C21.8855 17.0497 22.9303 17.2514 22.9303 17.2514L24.8899 20.6302L23.0206 22.4447C23.0206 22.4447 23.8459 24.5943 24.8151 25.6536C25.9055 26.8453 28.2991 27.8827 28.2991 27.8827L30.1684 26.0682L33.6574 27.9624C33.6574 27.9624 33.6825 28.9152 33.4675 29.467C32.8061 31.1644 31.9155 31.1008 30.0937 31.0916C27.3345 31.0776 25.0538 29.2671 23.1158 27.3031C21.2555 25.418 19.8366 22.5648 19.6916 21.0553C19.5173 19.2419 19.5019 17.7188 21.2559 17.2265Z" fill="white"/><path d="M15.265 30.2867L15.4383 29.7768L15.1771 29.3059C14.3785 27.8656 13.9771 26.5865 13.8933 25.2832C13.8089 23.9714 14.0409 22.5521 14.628 20.8244C16.7453 14.5935 23.5128 11.2589 29.7437 13.3762C35.9745 15.4935 39.3091 22.261 37.1918 28.4919C35.0745 34.7227 28.307 38.0573 22.0762 35.94L22.0691 35.9376L22.0621 35.9352L22.0551 35.9329L22.0481 35.9305L22.0411 35.9281L22.0342 35.9257L22.0272 35.9234L22.0202 35.921L22.0133 35.9186L22.0063 35.9163L21.9994 35.9139L21.9924 35.9116L21.9855 35.9092L21.9786 35.9069L21.9717 35.9045L21.9648 35.9022L21.9579 35.8998L21.951 35.8975L21.9441 35.8951L21.9372 35.8928L21.9304 35.8905L21.9235 35.8881L21.9167 35.8858L21.9098 35.8835L21.903 35.8812L21.8962 35.8788L21.8894 35.8765L21.8825 35.8742L21.8757 35.8719L21.869 35.8696L21.8622 35.8673L21.8554 35.865L21.8486 35.8627L21.8419 35.8604L21.8351 35.8581L21.8284 35.8558L21.8216 35.8535L21.8149 35.8512L21.8082 35.849L21.8015 35.8467L21.7948 35.8444L21.7881 35.8421L21.7814 35.8398L21.7747 35.8376L21.7681 35.8353L21.7614 35.8331L21.7548 35.8308L21.7481 35.8285L21.7415 35.8263L21.7349 35.824L21.7283 35.8218L21.7216 35.8195L21.715 35.8173L21.7085 35.8151L21.7019 35.8128L21.6953 35.8106L21.6887 35.8084L21.6822 35.8061L21.6756 35.8039L21.6691 35.8017L21.6626 35.7995L21.6561 35.7973L21.6496 35.795L21.6431 35.7928L21.6366 35.7906L21.6301 35.7884L21.6236 35.7862L21.6171 35.784L21.6107 35.7818L21.6042 35.7796L21.5978 35.7775L21.5914 35.7753L21.585 35.7731L21.5785 35.7709L21.5721 35.7687L21.5658 35.7666L21.5594 35.7644L21.553 35.7622L21.5466 35.7601L21.5403 35.7579L21.5339 35.7558L21.5276 35.7536L21.5213 35.7515L21.515 35.7493L21.5087 35.7472L21.5024 35.745L21.4961 35.7429L21.4898 35.7408L21.4835 35.7386L21.4773 35.7365L21.471 35.7344L21.4648 35.7323L21.4586 35.7301L21.4523 35.728L21.4461 35.7259L21.4399 35.7238L21.4337 35.7217L21.4276 35.7196L21.4214 35.7175L21.4152 35.7154L21.4091 35.7133L21.4029 35.7112L21.3968 35.7091L21.3907 35.7071L21.3846 35.705L21.3785 35.7029L21.3724 35.7008L21.3663 35.6988L21.3602 35.6967L21.3542 35.6947L21.3481 35.6926L21.3421 35.6906L21.336 35.6885L21.33 35.6865L21.324 35.6844L21.318 35.6824L21.312 35.6803L21.306 35.6783L21.3001 35.6763L21.2941 35.6743L21.2882 35.6722L21.2822 35.6702L21.2763 35.6682L21.2704 35.6662L21.2645 35.6642L21.2586 35.6622L21.2527 35.6602L21.2468 35.6582L21.2409 35.6562L21.2351 35.6542L21.2293 35.6522L21.2234 35.6502L21.2176 35.6483L21.2118 35.6463L21.206 35.6443L21.2002 35.6423L21.1944 35.6404L21.1886 35.6384L21.1829 35.6365L21.1771 35.6345L21.1714 35.6326L21.1657 35.6306L21.16 35.6287L21.1543 35.6267L21.1486 35.6248L21.1429 35.6229L21.1372 35.6209L21.1316 35.619L21.1259 35.6171L21.1203 35.6152L21.1147 35.6133L21.109 35.6114L21.1034 35.6095L21.0978 35.6076L21.0923 35.6057L21.0867 35.6038L21.0811 35.6019L21.0756 35.6L21.0701 35.5981L21.0645 35.5962L21.059 35.5944L21.0535 35.5925L21.048 35.5906L21.0425 35.5888L21.0371 35.5869L21.0316 35.5851L21.0262 35.5832L21.0207 35.5814L21.0153 35.5795L21.0099 35.5777L21.0045 35.5758L20.9991 35.574L20.9938 35.5722L20.9884 35.5704L20.983 35.5685L20.9777 35.5667L20.9724 35.5649L20.9671 35.5631L20.9617 35.5613L20.9565 35.5595L20.9512 35.5577L20.9459 35.5559L20.9406 35.5541L20.9354 35.5524L20.9302 35.5506L20.9249 35.5488L20.9197 35.547L20.9145 35.5453L20.9094 35.5435L20.9042 35.5418L20.899 35.54L20.8939 35.5382L20.8887 35.5365L20.8836 35.5348L20.8785 35.533L20.8734 35.5313L20.8683 35.5296L20.8632 35.5278L20.8582 35.5261L20.8531 35.5244L20.8481 35.5227L20.8431 35.521L20.838 35.5193L20.833 35.5176L20.8281 35.5159L20.8231 35.5142L20.8181 35.5125L20.8132 35.5108L20.8082 35.5091L20.8033 35.5075L20.7984 35.5058L20.7935 35.5041L20.7886 35.5025L20.7837 35.5008L20.7789 35.4992L20.774 35.4975L20.7692 35.4959L20.7643 35.4942L20.7595 35.4926L20.7547 35.491L20.7499 35.4893L20.7452 35.4877L20.7404 35.4861L20.7357 35.4845L20.7309 35.4829L20.7262 35.4813L20.7215 35.4797L20.7168 35.4781L20.7121 35.4765L20.7074 35.4749L20.7028 35.4733L20.6981 35.4717L20.6935 35.4702L20.6889 35.4686L20.6843 35.467L20.6797 35.4655L20.6751 35.4639L20.6705 35.4624L20.666 35.4608L20.6615 35.4593L20.6569 35.4577L20.6524 35.4562L20.6479 35.4547L20.6434 35.4531L20.639 35.4516L20.6345 35.4501L20.6301 35.4486L20.6256 35.4471L20.6212 35.4456L20.6168 35.4441L20.6124 35.4426L20.608 35.4411L20.6037 35.4396L20.5993 35.4382L20.595 35.4367L20.5907 35.4352L20.5864 35.4338L20.5821 35.4323L20.5778 35.4308L20.5735 35.4294L20.5693 35.4279L20.565 35.4265L20.5608 35.4251L20.5566 35.4236L20.5524 35.4222L20.5482 35.4208L20.544 35.4194L20.5399 35.418L20.5357 35.4166L20.5316 35.4151L20.5275 35.4137L20.5234 35.4124L20.5193 35.411L20.5152 35.4096L20.5112 35.4082L20.5071 35.4068L20.5031 35.4055L20.4991 35.4041L20.4951 35.4027L20.4911 35.4014L20.4871 35.4L20.4832 35.3987L20.4792 35.3973L20.4753 35.396L20.4714 35.3947L20.4675 35.3934L20.4636 35.392L20.4597 35.3907L20.4559 35.3894L20.452 35.3881L20.4482 35.3868L20.4444 35.3855L20.4406 35.3842L20.4368 35.3829L20.433 35.3817L20.4293 35.3804L20.4256 35.3791L20.4218 35.3778L20.4181 35.3766L20.4144 35.3753L20.4107 35.3741L20.4071 35.3728L20.4034 35.3716L20.3998 35.3704L20.3962 35.3691L20.3926 35.3679L20.389 35.3667L20.3854 35.3655L20.3818 35.3642L20.3783 35.363L20.3747 35.3618L20.3712 35.3606L20.3677 35.3595L20.3642 35.3583L20.3608 35.3571L20.3573 35.3559L20.3539 35.3548L20.3505 35.3536L20.347 35.3524L20.3436 35.3513L20.3403 35.3501L20.3369 35.349L20.3336 35.3478L20.3302 35.3467L20.3269 35.3456L20.3236 35.3445L20.3203 35.3433L20.317 35.3422L20.3138 35.3411L20.3105 35.34L20.3073 35.3389L20.3041 35.3378L20.3009 35.3368L20.2977 35.3357L20.2946 35.3346L20.2914 35.3335L20.2883 35.3325L20.2852 35.3314L20.2821 35.3304L20.279 35.3293L20.2759 35.3283L20.2729 35.3272L20.2698 35.3262L20.2668 35.3252L20.2638 35.3241L20.2608 35.3231L20.2578 35.3221L20.2549 35.3211L20.2519 35.3201L20.249 35.3191L20.2461 35.3181L20.2432 35.3171L20.2403 35.3162L20.2375 35.3152L20.2346 35.3142L20.2318 35.3133L20.229 35.3123L20.2262 35.3114L20.2234 35.3104L20.2206 35.3095L20.2179 35.3085L20.2152 35.3076L20.2124 35.3067L20.2097 35.3058L20.2071 35.3049L20.2044 35.304L20.2017 35.3031L20.1991 35.3022L20.1965 35.3013L20.1939 35.3004L20.1913 35.2995L20.1887 35.2986L20.1862 35.2978L20.1837 35.2969L20.1811 35.2961L20.1786 35.2952L20.1762 35.2944L20.1737 35.2935L20.1712 35.2927L20.1688 35.2919L20.1664 35.291L20.164 35.2902L20.1616 35.2894L20.1592 35.2886L20.1569 35.2878L20.1545 35.287L20.1522 35.2862L20.1499 35.2854L20.1476 35.2847L20.1454 35.2839L20.1431 35.2831L20.1409 35.2824L20.1387 35.2816L20.1365 35.2809L20.1343 35.2801L20.1321 35.2794L20.13 35.2787L20.1279 35.2779L20.1258 35.2772L20.1237 35.2765L20.1216 35.2758L20.1195 35.2751L20.1175 35.2744L20.1155 35.2737L20.1134 35.273L20.1115 35.2724L20.1095 35.2717L20.1075 35.271L20.1056 35.2704L20.1037 35.2697L20.1018 35.2691L20.0999 35.2684L20.098 35.2678L20.0962 35.2672L20.0943 35.2666L20.0925 35.2659L20.0907 35.2653L20.0889 35.2647L20.0872 35.2641L20.0854 35.2635L20.0837 35.2629L20.082 35.2624L20.0803 35.2618L20.0786 35.2612L20.077 35.2607L20.0753 35.2601L20.0737 35.2595L20.0721 35.259L20.0705 35.2585L20.069 35.2579L20.0674 35.2574L20.0659 35.2569L20.0644 35.2564L20.0629 35.2559L20.0614 35.2554L20.0599 35.2549L20.0585 35.2544L20.0571 35.2539L20.0557 35.2534L20.0543 35.2529L20.0529 35.2525L20.0516 35.252L20.0502 35.2516L20.0489 35.2511L20.0476 35.2507L20.0464 35.2503L20.0451 35.2498L20.0439 35.2494L20.0426 35.249L20.0414 35.2486L20.0403 35.2482L20.0391 35.2478L20.0379 35.2474L20.0368 35.247L20.0357 35.2466L20.0346 35.2463L20.0335 35.2459L20.0325 35.2455L20.0315 35.2452L20.0304 35.2448L20.0294 35.2445L20.0285 35.2442L20.0275 35.2438L20.0266 35.2435L20.0256 35.2432L20.0247 35.2429L20.0238 35.2426L20.023 35.2423L20.0221 35.242L20.0213 35.2417L20.0205 35.2415L20.0197 35.2412L20.0189 35.2409L20.0182 35.2407L20.0175 35.2404L20.0167 35.2402L20.016 35.24L20.0154 35.2397L20.0147 35.2395L20.0141 35.2393L20.0135 35.2391L20.0129 35.2389L20.0123 35.2387L20.0117 35.2385L20.0112 35.2383L20.0107 35.2381L20.0102 35.2379L20.0097 35.2378L20.0092 35.2376L20.0088 35.2375L20.0083 35.2373L20.0079 35.2372L20.0076 35.2371L20.0072 35.2369L20.0068 35.2368L20.0065 35.2367L20.0062 35.2366L20.0059 35.2365L20.0057 35.2364L20.0054 35.2363L20.0052 35.2363L20.005 35.2362L20.0048 35.2361L20.0046 35.2361L20.0045 35.236L20.0043 35.236L20.0042 35.2359L20.0041 35.2359L20.0041 35.2359L20.004 35.2359L20.004 35.2358L19.7162 35.138L19.4162 35.1872L13.2569 36.1963L15.265 30.2867Z" stroke="white" stroke-width="2.43173"/></svg>';
const phone_template = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="#EC5923"/><path d="M13.9776 9.53118C15.2944 9.16158 17.4794 9.58328 17.4794 9.58328L21.5772 16.6493L17.668 20.4439C17.668 20.4439 19.3941 24.9392 21.4209 27.1545C23.7011 29.6466 28.7069 31.8161 28.7069 31.8161L32.6161 28.0215L39.9124 31.9829C39.9124 31.9829 39.965 33.9752 39.5153 35.1292C38.1321 38.6791 36.2696 38.5461 32.4598 38.5267C26.6897 38.4975 21.92 34.7113 17.8671 30.6041C13.9769 26.6617 11.0095 20.6951 10.7062 17.5383C10.3419 13.7459 10.3095 10.5608 13.9776 9.53118Z" fill="white"/></svg>';
const mail_template = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14 14C12.3431 14 11 15.3431 11 17V17.6667L11.0145 17.6425L25.5 26.3338L39.9855 17.6425L40 17.6667V17C40 15.3431 38.6569 14 37 14H14ZM40 19.9662L26.0145 28.3575L25.5 28.6662L24.9855 28.3575L11 19.9662V33C11 34.6569 12.3431 36 14 36H37C38.6569 36 40 34.6569 40 33V19.9662Z" fill="white"/></svg>';
const viber_template = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="#7D51A0"/><path d="M38.4142 12.0855C35.0186 6.70915 16.9086 6.56762 12.5226 12.0855C8.13665 17.6034 10.2589 30.1955 12.9471 32.7422C15.6353 35.2889 17.4746 35.2889 17.4746 35.2889V42.0801L23.1339 36.0131C28.6657 36.5584 34.8143 35.9824 37.4239 33.4496C42.2343 28.7807 41.8099 17.4619 38.4142 12.0855Z" fill="white"/><path d="M18.0449 14.6694C18.8366 14.4047 20.1813 14.5965 20.1813 14.5965L22.8909 18.7816L20.6211 21.2119C20.6211 21.2119 21.8078 23.9008 23.1098 25.1908C24.5744 26.6419 27.691 27.8148 27.691 27.8148L29.9607 25.3845L34.5274 27.5813C34.5274 27.5813 34.619 28.7944 34.3794 29.5114C33.6423 31.7169 32.5028 31.6915 30.1796 31.7937C26.661 31.9484 23.64 29.7828 21.0463 27.4001C18.5568 25.113 16.5693 21.5642 16.29 19.6487C15.9545 17.3476 15.8395 15.4068 18.0449 14.6694Z" fill="#7D51A0"/><path d="M25.3977 13.6418C25.3977 13.6418 29.8236 14.4983 31.623 16.4715C33.3312 18.3446 33.8868 22.5553 33.8868 22.5553" stroke="#7D51A0" stroke-width="0.848905"/><path d="M26.1051 16.1887C26.1051 16.1887 28.9152 16.7325 30.0577 17.9853C31.1422 19.1746 31.495 21.8481 31.495 21.8481" stroke="#7D51A0" stroke-width="0.848905"/><path d="M26.3881 18.4524C26.3881 18.4524 27.9336 18.7515 28.562 19.4405C29.1585 20.0946 29.3525 21.565 29.3525 21.565" stroke="#7D51A0" stroke-width="0.848905"/></svg>';

//////цвет главной кнопки////
const main_btn_color = "#7534ca";
/////////////////////////////

const main_btn_template = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="'+main_btn_color+'"/><mask id="path-2-inside-1" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M22 33.9999C29.1797 33.9999 35 29.7466 35 24.4999C35 23.5425 34.8061 22.6181 34.4456 21.7466C36.7965 23.1221 38.2858 25.1627 38.2858 27.4405C38.2858 31.5827 33.3609 34.9405 27.2858 34.9405C25.3487 34.9405 23.5287 34.5992 21.9479 33.9998C21.9652 33.9999 21.9826 33.9999 22 33.9999Z"/></mask><path fill-rule="evenodd" clip-rule="evenodd" d="M22 33.9999C29.1797 33.9999 35 29.7466 35 24.4999C35 23.5425 34.8061 22.6181 34.4456 21.7466C36.7965 23.1221 38.2858 25.1627 38.2858 27.4405C38.2858 31.5827 33.3609 34.9405 27.2858 34.9405C25.3487 34.9405 23.5287 34.5992 21.9479 33.9998C21.9652 33.9999 21.9826 33.9999 22 33.9999Z" fill="white"/><path d="M34.4456 21.7466L35.4556 20.0204L30.3251 17.0185L32.5975 22.5112L34.4456 21.7466ZM21.9479 33.9998L21.9536 31.9999L21.2389 35.87L21.9479 33.9998ZM33 24.4999C33 26.33 31.989 28.1582 30.0123 29.6027C28.0372 31.046 25.2109 31.9999 22 31.9999V35.9999C25.9688 35.9999 29.6425 34.8272 32.3724 32.8322C35.1008 30.8384 37 27.9166 37 24.4999H33ZM32.5975 22.5112C32.8626 23.1518 33 23.8171 33 24.4999H37C37 23.2678 36.7497 22.0843 36.2937 20.982L32.5975 22.5112ZM33.4356 23.4728C35.4081 24.6269 36.2858 26.1085 36.2858 27.4405H40.2858C40.2858 24.2169 38.1849 21.6172 35.4556 20.0204L33.4356 23.4728ZM36.2858 27.4405C36.2858 28.6557 35.5647 29.9818 33.9373 31.0914C32.32 32.194 29.9744 32.9405 27.2858 32.9405V36.9405C30.6723 36.9405 33.8267 36.0081 36.1906 34.3963C38.5444 32.7914 40.2858 30.3674 40.2858 27.4405H36.2858ZM27.2858 32.9405C25.5801 32.9405 24.0012 32.6394 22.6569 32.1297L21.2389 35.87C23.0561 36.5589 25.1174 36.9405 27.2858 36.9405V32.9405ZM22 31.9999C21.9845 31.9999 21.969 31.9999 21.9536 31.9999L21.9422 35.9998C21.9614 35.9999 21.9807 35.9999 22 35.9999V31.9999Z" fill="white" mask="url(#path-2-inside-1)"/><path d="M32 24.5C32 26.1431 31.0238 27.7437 29.2148 28.9771C27.4109 30.207 24.8631 31 22 31C19.1369 31 16.5891 30.207 14.7852 28.9771C12.9762 27.7437 12 26.1431 12 24.5C12 22.8569 12.9762 21.2563 14.7852 20.0229C16.5891 18.793 19.1369 18 22 18C24.8631 18 27.4109 18.793 29.2148 20.0229C31.0238 21.2563 32 22.8569 32 24.5Z" fill="'+main_btn_color+'" stroke="white" stroke-width="2"/><path d="M12 34L15.5 30L19.5 31L12 34Z" fill="white"/><path d="M37 37L33.2667 33L29 34L37 37Z" fill="white"/></svg>';
const main_btn_template_close = '<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="25" cy="25" r="25" fill="'+main_btn_color+'"/><line x1="18.364" y1="18.3642" x2="31.0919" y2="31.0921" stroke="white" stroke-width="2"/><line x1="18.364" y1="31.092" x2="31.0919" y2="18.364" stroke="white" stroke-width="2"/></svg>';

let main_btn = {
    title:"Напишите нам",
    element:null,
    popup:null
}

let open_state = false;
let focus_state = false;

let items = [
    // {
    //     title:"Телефон",
    //     template:phone_template,
    //     element:null,
    //     popup:null,
    //     bgColor:"#EC5923",
    //     link:"tel:+79213333333"
    // },
    // {
    //     title:"Email",
    //     template:mail_template,
    //     element:null,
    //     popup:null,
    //     bgColor:"#C4C4C4",
    //     link:"mailto:directexpertspb@yandex.ru"
    // },
    {
        title:"WhatsApp",
        template:whatsapp_template,
        element:null,
        popup:null,
        bgColor:"#4EC247",
        link:"https://wa.me/79219205060"
    },
    {
        title:"Telegram",
        template:telegram_template,
        element:null,
        popup:null,
        bgColor:"#0188CB",
        link:"https://telegram.me/tehno_skupka"
    }
    // {
    //     title:"Viber",
    //     template:viber_template,
    //     element:null,
    //     popup:null,
    //     bgColor:"#7D51A0",
    //     link:"viber://chat?number=+79111185769"
    // },
]
function create_main_button(){
    // create button
    main_btn.element=document.createElement('div');
    main_btn.element.style.position='fixed';
    main_btn.element.style.left='20px';
    main_btn.element.style.bottom='20px';
    main_btn.element.style.backgroundColor = main_btn_color;
    main_btn.element.style.zIndex="99999";
    main_btn.element.innerHTML = main_btn_template;
    main_btn.element.classList.add("clone_js_button");
    main_btn.element.onmouseenter = function(){
        if(!focus_state){
             show_buttons();
             hide_main_popup();
            main_btn.element.innerHTML = main_btn_template_close;
            main_btn.element.style.transform="rotate(360deg)";
            open_state = true;
            focus_state = true;
        }
    }
    main_btn.element.onmouseleave = function(){
        focus_state = false;
    }
    main_btn.element.onclick = function(){
        if(!open_state){
            show_buttons();
            hide_main_popup();
            main_btn.element.innerHTML = main_btn_template_close;
            main_btn.element.style.transform="rotate(360deg)";
        }else{
            hide_buttons();
            show_main_popup();
            main_btn.element.innerHTML = main_btn_template;
            main_btn.element.style.transform="rotate(0deg)";
        }
        open_state = !open_state;
    }
    document.body.appendChild(main_btn.element);

    // create popup
    main_btn.popup=document.createElement('div');
    main_btn.popup.style.position='fixed';
    main_btn.popup.style.left='80px';
    main_btn.popup.style.bottom='33px';
    main_btn.popup.style.opacity='0';
    main_btn.popup.style.cursor='pointer';
    main_btn.popup.style.zIndex="99998";
    main_btn.popup.innerHTML = main_btn.title;
    main_btn.popup.classList.add("clone_js_button_popup");
    main_btn.popup.onclick = function(){
        show_buttons();
        hide_main_popup();
        main_btn.element.innerHTML = main_btn_template_close;
        main_btn.element.style.transform="rotate(360deg)";
    }
    document.body.appendChild(main_btn.popup);

}
function create_bar(){
    items.forEach((el)=>{
        // create button
        el.element=document.createElement('div');
        el.element.style.position='fixed';
        el.element.style.left='20px';
        el.element.style.bottom='20px';
        el.element.style.zIndex="99997";
        el.element.style.backgroundColor = el.bgColor;
        el.element.innerHTML = el.template;
        el.element.classList.add("clone_js_button_items");
        el.element.onmouseover = function(){
            el.popup.style.opacity='1';
            el.popup.style.left='90px';
        }
        el.element.onmouseout = function(){
            el.popup.style.opacity='0';
            el.popup.style.left='80px';
        }
        el.element.onclick = function(){
            location.href = el.link;
        }

        document.body.appendChild(el.element);
        // create popup
        el.popup=document.createElement('div');
        el.popup.style.position='fixed';
        el.popup.style.left='80px';
        el.popup.style.bottom='40px';
        el.popup.style.opacity='0';
        el.popup.style.zIndex="99997";
        el.popup.innerHTML = el.title;
        el.popup.classList.add("clone_js_button_popup");
        document.body.appendChild(el.popup);
    })
    
}
function show_buttons(){
    let space = 80;
    items.forEach((el)=>{
        el.element.style.bottom= space+'px';
        el.element.style.opacity= '1';
        el.popup.style.bottom= (space+10)+'px';
        el.element.classList.add("clone_js_button");
        space+=60;
    })
}

function hide_buttons(){
    items.forEach((el)=>{
        el.element.style.bottom= '20px';
        el.element.style.opacity= '0';
        el.element.classList.remove("clone_js_button");
    })
}

function show_main_popup(){
    setTimeout(() => {
        main_btn.popup.style.opacity='1';
        main_btn.popup.style.left='90px';
    }, 500);
   
}

function hide_main_popup(){
    main_btn.popup.style.opacity='0';
    main_btn.popup.style.left='80px';
}
function mobile_replace(){
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        // код для мобильных устройств
        let link = items.find(e=>e.title=="Viber").link.replace('chat',"add");
        link = link.replace('+',"");
        items.find(e=>e.title=="Viber").link = link;
      }
}
document.addEventListener("DOMContentLoaded", function(event) { 
    create_main_button();
    create_bar();
    mobile_replace();
    setTimeout(() => {
        show_main_popup();
    }, 1000);
});